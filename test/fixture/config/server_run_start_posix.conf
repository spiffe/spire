server {
  bind_address = "127.0.0.1"
  bind_port = "8081"
  socket_path = "/tmp/spire-server-test/private/api.sock"
  trust_domain = "example.org"
  log_level = "DEBUG"
  ca_subject {
    country = ["US"]
    organization = ["SPIFFE"]
    common_name = ""
  }
}

plugins {
  DataStore "sql" {
    plugin_data {
      database_type = "sqlite3"
      connection_string = "$SPIRE_SERVER_TEST_DATA_CONNECTION"
    }
  }

  NodeAttestor "join_token" {
    plugin_data {
    }
  }

  KeyManager "memory" {
    plugin_data = {}
  }

  UpstreamAuthority "disk" {
    plugin_data {
      key_file_path = "../../../../conf/server/dummy_upstream_ca.key"
      cert_file_path = "../../../../conf/server/dummy_upstream_ca.crt"
    }
  }
}
